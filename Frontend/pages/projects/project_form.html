<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Project Form / Aishalaya</title>
  <link rel="shortcut icon" href="../../assets/images/aishLogo.ico"/>
    
  <!-- plugins:css -->
  <link rel="stylesheet" href="../../assets/vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="../../assets/vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <!-- endinject -->
  <!-- Layout styles -->
  <link rel="stylesheet" href="http://127.0.0.1:5500/assets/css/style.css">
 
  <!--showalert Message-->
  <script src="http://127.0.0.1:5500/assets/js/alertMessages.js"></script>
 
   
  <!-- End layout styles -->
</head>

<body>
  <div class="container-scroller">
    <!-- partial:../../partials/_navbar.html -->
<!-- partial -->
<nav class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
  <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
    <a class="navbar-brand brand-logo" href="../../index.html"><img src="../../assets/images/logo.png" alt="logo" style="height: 100%;"/></a>
    <a class="navbar-brand brand-logo-mini" href="../../index.html"><img src="../../assets/images/logo.png" alt="logo" style="height: 100%;"/></a>
    </div>
  <div class="navbar-menu-wrapper d-flex align-items-stretch">
    <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
      <span class="mdi mdi-menu"></span>
    </button>
    <ul class="navbar-nav navbar-nav-right">
      <li class="nav-item d-none d-lg-block full-screen-link">
        <a class="nav-link">
          <i class="mdi mdi-fullscreen" id="fullscreen-button"></i>
        </a>
      </li>
      <li class="nav-item nav-logout d-none d-lg-block">
        <a class="nav-link"  onclick="logout()">
          <i class="mdi mdi-power"></i>
        </a>
      </li>

    </ul>
    <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
      <span class="mdi mdi-menu"></span>
    </button>
  </div>
</nav>

  <!-- Your HTML content here -->

  <!-- Include Bootstrap JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- Your custom JavaScript code here -->
   
    <div class="container-fluid page-body-wrapper">
      <div id="includeHtml"></div>

      <div class="main-panel">
        <div class="content-wrapper">
          <div class="page-header">
            <h3 class="page-title">Project Form </h3>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="dashboard.html">Dashboard</a></li>
                <li class="breadcrumb-item active" aria-current="page">Project Form</li>
              </ol>
            </nav>
          </div>
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-body">
                  <!-- <h4 class="card-title">Project</h4> -->
                  <form class="form-sample" id="projectForm">

                    <div class="accordion accordion-flush" id="accordionFlushExample">
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="flush-headingOne">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                            Basic Infomation <span class="text-danger">*</span>
                          </button>
                        </h2>
                        <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body">
                            <div class="row">
                              
                              
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="companyName">Company Name <span class="text-danger">*</span></label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="text" id="companyName" name="companyName" placeholder="Enter Company Name" oninput="validateInput('companyName')" required /><br>
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="projectName">Project Name <span class="text-danger">*</span></label>
                                  <div class="col-sm-9">
                                    <input class="form-control" placeholder="Enter Project Name" type="text" id="projectName" name="projectName" oninput="validateInput('projectName')" required/>
                                  </div>
                                </div>
                              </div>

                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="launchDate">Launch Date <span class="text-danger">*</span></label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="date" id="launchDate" name="alterMobile" required/>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="form-group row" for="district">
                                  <label class="col-sm-6 col-form-label">District <span class="text-danger">*</span></label>
                                  <div class="col-sm-9">
                                    <input type="text" class="form-control" id="district" name="district" placeholder="Enter District" oninput="validateInput('district')" required/>
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="taluk">Taluk <span class="text-danger">*</span></label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="text" id="taluk" name="taluk" placeholder="Enter Taluk"  oninput="validateNo('taluk')" required/>
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="village">Village <span class="text-danger">*</span></label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="text" id="village" name="village" placeholder="Enter Village" oninput="validateInput('village')" required/>
                                  </div>
                                </div>
                              </div>

                              </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="flush-headingTwo">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                            Other Infomation
                          </button>
                        </h2>
                        <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body">
                            <div class="row">
                             
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="landType">LandType</label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="text" id="landType" name="landType" placeholder="Enter LandType" oninput="validateNo('landType')"/>
                                  </div>
                                </div>
                              </div>
                             
        
                              
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="extent">Extent</label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="text" id="extent" name="extent" placeholder="Enter Extent" oninput="validatesNumberInput(event)" />
                                  </div>
                                </div>
                              </div>
        
                            <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="address">Address</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="address" name="address" class="form-control" placeholder="Enter Address"/>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="geoLocation">Geo Location</label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="text" id="geoLocation" name="geoLocation" placeholder="Enter Geo Location"/>
                                  </div>
                                </div>
                              </div>
                              </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="flush-headingThree">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                           Plots Infomation
                          </button>
                        </h2>
                        <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body">
                            <div class="row">
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="totalSiteSqft">Total SiteSqft</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="totalSiteSqft" name="totalSiteSqft" class="form-control" placeholder="Enter Total SiteSqft" oninput="validatesNumberInput(event)"  />
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="totalSiteCent">Total SiteCent</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="totalSiteCent" name="totalSiteCent" class="form-control" placeholder="Enter Total SiteCent" oninput="validatesNumberInput(event)" />
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="saleableSqft">Saleable Sqft</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="saleableSqft" name="saleableSqft" class="form-control" placeholder="Enter saleableSqft" oninput="validatesNumberInput(event)" />
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="saleableCent">Saleable Cent</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="saleableCent" name="saleableCent" class="form-control" placeholder="Enter SaleableCent" oninput="validatesNumberInput(event)"/>
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="roadSqft">Road Sqft</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="roadSqft" name="roadSqft" class="form-control" placeholder="Enter Road Sqft" oninput="validatesNumberInput(event)"/>
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="roadCent">Road Cent</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="roadCent" name="roadCent" class="form-control" placeholder="Enter Road Cent" oninput="validatesNumberInput(event)"  />
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="totalPlots">Total Plots</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="totalPlots" name="totalPlots" class="form-control" placeholder="Enter total Plots" oninput="validatesNumberInput(event)"/>
                                  </div>
                                </div>
                              </div>
        
        
                              </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="flush-headingfour">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsefour" aria-expanded="false" aria-controls="flush-collapsefour">
                           Facing Infomation
                          </button>
                        </h2>
                        <div id="flush-collapsefour" class="accordion-collapse collapse" aria-labelledby="flush-headingfour" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="eastDetails">East Details</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="eastDetails" name="eastDetails" class="form-control" placeholder="Enter EastDetails" oninput="validateNo('eastDetails')"/>
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-6">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="westDetails">West Details</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="westDetails" name="westDetails" class="form-control" placeholder="Enter West Details" oninput="validateNo('westDetails')" />
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-6">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="northDetails">North Details</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="northDetails" name="northDetails" class="form-control" placeholder="Enter North Details" oninput="validateNo('northDetails')"/>
                                  </div>
                                </div>
                              </div>
        
                              <div class="col-md-6"> 
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="southDetails">South Details</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="southDetails" name="southDetails" class="form-control" placeholder="Enter South Details" oninput="validateNo('southDetails')"/>
                                  </div>
                                </div>
                              </div>
        
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="flush-headingfive">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsefive" aria-expanded="false" aria-controls="flush-collapsefive">
                            Previous Owner Information
                          </button>
                        </h2>
                        <div id="flush-collapsefive" class="accordion-collapse collapse" aria-labelledby="flush-headingfive" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body">
                            <div class="row">
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-6 col-form-label" for="prevOwnerName">Prev Owner Name</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="prevOwnerName" name="prevOwnerName" class="form-control" placeholder="Enter PrevOwner Name" oninput="validateInput('prevOwnerName')"/>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-9 col-form-label" for="prevOwnerContact">Prev Owner Contact</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="prevOwnerContact" name="prevOwnerContact" class="form-control" placeholder="Enter PrevOwner Contact" oninput="validateMobile(event)"/>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="form-group row">
                                  <label class="col-sm-9 col-form-label" for="prevOwnerAddress">Prev Owner Address</label>
                                  <div class="col-sm-9">
                                    <input type="text" id="prevOwnerAddress" name="prevOwnerAddress" class="form-control" placeholder="Enter PrevOwner Address"/>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="flush-headingsix">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsesix" aria-expanded="false" aria-controls="flush-collapsesix">
                            Document Infomation <span class="text-danger">*</span>
                          </button>
                        </h2>
                        <div id="flush-collapsesix" class="accordion-collapse collapse" aria-labelledby="flush-headingsix" data-bs-parent="#accordionFlushExample">
                          <div class="accordion-body">
                            <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="agreementDetails">Agreement Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="agreementDetails" name="agreementDetails" class="form-control" placeholder="Enter Agreement Details" />
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="agreementDocuments">Agreement Documents <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="agreementDocuments" name="agreementDocuments" placeholder="Enter Agreement Documents" required/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="draftDetails">Draft Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="draftDetails" name="draftDetails" class="form-control" placeholder="Enter Draft Details"/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="draftDocuments">Draft Documents  <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="draftDocuments" name="draftDocuments" placeholder="Enter Draft Documents" required/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="legalDetails">Legal Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="legalDetails" name="legalDetails" class="form-control" placeholder="Enter LegalDetails"/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="legalDocuments">Legal Documents  <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="legalDocuments" name="legalDocuments" required/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="documentDetails">Document Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="documentDetails" name="documentDetails" class="form-control" placeholder="Enter Document Details"/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="documentDocuments">Document Documents  <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="documentDocuments" name="documentDocuments" required/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="legalBookDetails">LegalBook Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="legalBookDetails" name="legalBookDetails" class="form-control" placeholder="Enter LegalBookDetails"/>
                          </div>
                        </div>
                      </div>  
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="legalBookDocuments">LegalBook Documents <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="legalBookDocuments" name="legalBookDocuments" required/>
                          </div>
                        </div>
                      </div> 
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="dtcpDetails">Dtcp Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="dtcpDetails" name="dtcpDetails" class="form-control" placeholder="Enter DTCP Details"/>
                          </div>
                        </div>
                      </div> 
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="dtcpDocuments">Dtcp Documents <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="dtcpDocuments" name="dtcpDocuments" required/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="corporationDetails">Corporation Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="corporationDetails" name="corporationDetails" class="form-control" placeholder="Enter Corporation Details"/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="corporationDocuments">Corporation Documents  <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="corporationDocuments" name="corporationDocuments" required/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="registrationDetails">Registration Details</label>
                          <div class="col-sm-9">
                            <input type="text" id="registrationDetails" name="registrationDetails" class="form-control" placeholder="Enter Registration Details"/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="registrationDocuments">Registration Documents  <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input type="file" id="registrationDocuments" name="registrationDocuments" class="form-control" placeholder="Enter Registration Details"/>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label class="col-sm-6 col-form-label" for="layout">Layout <span class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input class="form-control" type="file" id="layout" name="layout" required/>
                          </div>
                        </div>
                      </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div> 
                   
                    <div class="d-flex justify-content-end">
                      <button type="submit" class="btn btn-gradient-primary me-2" id="submitBtn">Submit</button>
                      <a href="project_list.html" class="btn btn-light">Cancel</a>
                  </div>
                  
                  </form>
                 </div>
              </div>
            </div>
          </div>

        </div>
        <!-- content-wrapper ends -->
           <!-- partial:../../partials/_footer.html -->
           <div id="includeFooder"></div>
           <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  
    <!-- plugins:js -->
  <script src="../../assets/vendors/js/vendor.bundle.base.js"></script></script>
 */
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="../../assets/vendors/chart.js/Chart.min.js"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="../../assets/js/off-canvas.js"></script>
    <script src="../../assets/js/hoverable-collapse.js"></script>
    <!-- <script src="../../assets/js/pagination.js"></script> -->  
    <script src="../../assets/js/menu_active.js"></script>
    <script src="../../assets/js/misc.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <script src="../../assets/js/chart.js"></script>
    <!-- End custom js for this page -->
   <script>

let isContentLoaded = false;

document.addEventListener('DOMContentLoaded', async function() {


  if (isContentLoaded) return; // Prevent multiple executions
  isContentLoaded = true;

  try {
    const accessToken = localStorage.getItem('accessToken');
    const employeeEmail = localStorage.getItem('employeeEmail');
    
    // Fetch employee details to get associated company ID
    const responseEmployee = await fetch('http://localhost:8080/api/employee/getEmployeeByEmail/' + employeeEmail, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': accessToken,
      },
    });

    if (!responseEmployee.ok) {
      throw new Error('Failed to fetch employee details');
    }

    const dataEmployee = await responseEmployee.json();

    // Ensure that the company object and companyId are properly fetched
    if (!dataEmployee.company || !dataEmployee.company.companyId) {
      throw new Error('Company ID not found in employee details');
    }

    const companyId = dataEmployee.company.companyId;

    // Check if the current URL already contains the company ID parameter
    if (!window.location.href.includes(`companyId=${companyId}`)) {
      // Redirect to the EmployeeForm page with company ID query parameter
      const formUrl = `project_form.html?companyId=${companyId}`;
      window.location.href = formUrl;
    }

    // Fetch company details based on the companyId parameter
    const companyIdParam = new URLSearchParams(window.location.search).get('companyId');
    const responseCompany = await fetch(`http://localhost:8080/api/superAdmin/getCompanyById/${companyIdParam}`, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': accessToken,
      },
    });

    if (!responseCompany.ok) {
      throw new Error('Failed to fetch company details');
    }

    const companyData = await responseCompany.json();

    // Populate the company name input field with the fetched company name
    const companyNameInput = document.getElementById('companyName');
    companyNameInput.value = companyData.companyName;
    // Remaining code for fetching roles and populating dropdowns
    // ...
  } catch (error) {
    console.error('Error:', error);
    // Handle error
  }
});

const teamIdFromLocalStorage = localStorage.getItem('teamId');
    console.log(teamIdFromLocalStorage);


                    document.getElementById('projectForm').addEventListener('submit', async function (event) {
                      event.preventDefault();
                      
const currentCompanyId= localStorage.getItem('companyId');
                      const formData = new FormData();
                      const projectData = {
                        companyName: document.getElementById('companyName').value,
                        teamId : teamIdFromLocalStorage,
                        projectName: document.getElementById('projectName').value,
                        launchDate: document.getElementById('launchDate').value,
                        landType: document.getElementById('landType').value,
                        district: document.getElementById('district').value,
                       taluk: document.getElementById('taluk').value,
                        village: document.getElementById('village').value,
                        extent: document.getElementById('extent').value,
                        address: document.getElementById('address').value,
                        geoLocation: document.getElementById('geoLocation').value,
                        totalSiteSqft: document.getElementById('totalSiteSqft').value,
                        totalSiteCent: document.getElementById('totalSiteCent').value,
                        saleableSqft: document.getElementById('saleableSqft').value,
                        saleableCent: document.getElementById('saleableCent').value,
                        roadSqft: document.getElementById('roadSqft').value,
                        roadCent: document.getElementById('roadCent').value,
                        totalPlots: document.getElementById('totalPlots').value,
                        eastDetails: document.getElementById('eastDetails').value,
                        westDetails: document.getElementById('westDetails').value,
                      northDetails: document.getElementById('northDetails').value,
                        southDetails: document.getElementById('southDetails').value,
                        prevOwnerName: document.getElementById('prevOwnerName').value,
                        prevOwnerContact: document.getElementById('prevOwnerContact').value,
                        prevOwnerAddress: document.getElementById('prevOwnerAddress').value,
                        agreementDetails: document.getElementById('agreementDetails').value,
                       draftDetails: document.getElementById('draftDetails').value,
                        legalDetails: document.getElementById('legalDetails').value,
                        documentDetails: document.getElementById('documentDetails').value,
                        legalBookDetails: document.getElementById('legalBookDetails').value,
                        dtcpDetails: document.getElementById('dtcpDetails').value,
                        corporationDetails: document.getElementById('corporationDetails').value,
                        registrationDetails: document.getElementById('registrationDetails').value,
                        companyId:currentCompanyId
                      };
                      // Convert employeeData to JSON and append to formData
                      formData.append('project', new Blob([JSON.stringify(projectData)], { type: 'application/json' }));
                      const agreementDocumentsFileInput = document.getElementById('agreementDocuments');
                      if (agreementDocumentsFileInput.files.length > 0) {
                     // Append avatar file to formData
                        formData.append('agreementDocuments', agreementDocumentsFileInput.files[0]);
                      }
                      const draftDocumentsFileInput = document.getElementById('draftDocuments');
                      if (draftDocumentsFileInput.files.length > 0) {
                        // Append avatar file to formData
                        formData.append('draftDocuments', draftDocumentsFileInput.files[0]);
                      }
                      const legalDocumentsFileInput = document.getElementById('legalDocuments');
                      if (legalDocumentsFileInput.files.length > 0) {
                        // Append avatar file to formData
                        formData.append('legalDocuments', legalDocumentsFileInput.files[0]);
                      }
                      const documentDocumentsFileInput = document.getElementById('documentDocuments');
                      if (documentDocumentsFileInput.files.length > 0) {
                        // Append avatar file to formData
                        formData.append('documentDocuments', documentDocumentsFileInput.files[0]);
                      }
                     const legalBookDocumentsFileInput = document.getElementById('legalBookDocuments');
                      if (legalBookDocumentsFileInput.files.length > 0) {
                        // Append avatar file to formData
                        formData.append('legalBookDocuments', legalBookDocumentsFileInput.files[0]);
                      }
                      const dtcpDocumentsFileInput = document.getElementById('dtcpDocuments');
                        if (dtcpDocumentsFileInput.files.length > 0) {
                              // Append avatar file to formData
                             formData.append('dtcpDocuments', dtcpDocumentsFileInput.files[0]);
                    }     
                    const corporationDocumentsFileInput = document.getElementById('corporationDocuments');
                        if (corporationDocumentsFileInput.files.length > 0) {
                     // Append avatar file to formData
                         formData.append('corporationDocuments', corporationDocumentsFileInput.files[0]);
                         }
                         const layoutFileInput = document.getElementById('layout');
                        if (layoutFileInput.files.length > 0) {
                     // Append avatar file to formData
                         formData.append('layout', layoutFileInput.files[0]);
                         }
                      try {
                        const accessToken = localStorage.getItem('accessToken');
                        const response = await fetch('http://localhost:8080/api/project/addProject', {
                          method: 'POST',
                          body: formData,
                          headers: {
                          'Authorization': accessToken,
                        },

                          credentials: 'include'
                        });
                        if (!response.ok) {
                          throw new Error('Failed to add project');
                        }                   
                        showalert('Project added successfully');
                        document.getElementById('projectForm').reset();
                        // Optionally, redirect or perform any other action upon successful submission
                     } catch (error) {
                        console.error('Error:', error);
                        showalert('Failed to add project');
                      }
                    });


 

                    function logout() {
                      // Clear local storage
                      localStorage.clear();
                      
                      // Redirect to the logout page or perform other logout actions
                      window.location.href = '../../index.html';
                  }

                  

                  
                  function validateMobile(event) {
    const inputValue = event.target.value;
    const numericRegex = /^[0-9]*$/; // Regular expression to match numeric characters

    if (!numericRegex.test(inputValue)) {
        event.target.style.borderColor = 'red'; // Set border color to red
        event.target.setCustomValidity("Only numeric characters are allowed."); // Set validation message
        event.target.reportValidity(); // Show validation message
        event.target.value = inputValue.replace(/\D/g, ''); // Remove non-numeric characters
    } else if (inputValue.length > 12) {
        event.target.style.borderColor = 'red'; // Set border color to red
        event.target.setCustomValidity("Maximum length for mobile number is 12 digits."); // Set validation message
        event.target.reportValidity(); // Show validation message
        event.target.value = inputValue.slice(0, 12); // Truncate to 12 digits
    } else {
        event.target.style.borderColor = ''; // Reset border color
        event.target.setCustomValidity(""); // Clear validation message
    }
}

                   

function submitForm(event) {
    event.preventDefault(); // Prevent default form submission behavior
    
    validateInput('projectName');
    validateInput('district');
    validateInput('prevOwnerName');
    validateInput('village');
}

function validateInput(inputId) {
    const inputValue = document.getElementById(inputId).value;
    const alphaRegex = /^[a-zA-Z\s]+$/; // Regular expression to match only alphabetic characters and spaces
    const specialCharRegex = /[^a-zA-Z\s]/; // Regular expression to match any special characters
    
    if (specialCharRegex.test(inputValue) || !alphaRegex.test(inputValue)) {
        document.getElementById(inputId).style.borderColor = 'red'; // Set border color to red
        document.getElementById(inputId).setCustomValidity("Only alphabetic characters are allowed."); // Set validation message
        document.getElementById(inputId).reportValidity(); // Show validation message
    } else {
        document.getElementById(inputId).style.borderColor = ''; // Reset border color
        document.getElementById(inputId).setCustomValidity(""); // Clear validation message
    }
}

function validatesNumberInput(event) {
    const inputValue = event.target.value;
    const numericRegex = /^[0-9]*$/; // Regular expression to match numeric characters

    if (!numericRegex.test(inputValue)) {
        event.target.style.borderColor = 'red'; // Set border color to red
        event.target.setCustomValidity("Only numeric characters are allowed."); // Set validation message
        event.target.reportValidity(); // Show validation message
    } else {
        event.target.style.borderColor = ''; // Reset border color
        event.target.setCustomValidity(""); // Clear validation message
    }
}
   
document.getElementById('submit').addEventListener('click', submitForm);

function submitForm(event) {
    event.preventDefault(); // Prevent default form submission behavior
    
    // Validate both fields
    validateNo('taluk');
     validateNo('landType');
    
    validateNo('eastDetails');
    validateNo('westDetails');
    validateNo('northDetails');
    validateNo('southDetails');  
}

function validateNo(inputId) {
    const inputField = document.getElementById(inputId);
    const inputValue = inputField.value;
    const NoRegex = /^[A-Za-z0-9\s]*$/; // Regular expression to allow alphabets, numbers, and spaces

    if (!NoRegex.test(inputValue)) {
        inputField.style.borderColor = 'red'; // Set border color to red
        inputField.setCustomValidity("Please enter numbers and alphabets only."); // Set custom validation message
        inputField.reportValidity(); // Show validation message
    } else {
        inputField.style.borderColor = ''; // Reset border color
        inputField.setCustomValidity(""); // Clear custom validation message
    }
}
                  </script>

</body>

</html>